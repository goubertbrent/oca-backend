<div class="default-component-margin">
  <rcc-api-request-status [status]="appMetaDataStatus"></rcc-api-request-status>
  <form (ngSubmit)="updateMetaData()" #form="ngForm" *ngIf="metadata">
    <mat-form-field>
      <mat-label>{{ 'rcc.select_language' | translate }}</mat-label>
      <mat-select [(ngModel)]="metadata.language" name="language"
                  (ngModelChange)="languageChanged($event)"
                  required>
        <mat-option *ngFor="let language of languages" [value]="language.code" [innerText]="language.name"></mat-option>
      </mat-select>
    </mat-form-field>
    <p class="hint-text">
      {{ 'rcc.translations_add_language_explanation' | translate }}
      <a [routerLink]="[ '..', 'general' ]">{{ 'rcc.general_information' | translate }}</a>
    </p>
    <mat-form-field class="full-width">
      <mat-label>{{ 'rcc.app_subtitle' | translate }}</mat-label>
      <input matInput name="subtitle" #subtitle
             [(ngModel)]="metadata.subtitle"
             maxlength="30">
      <mat-hint align="end">{{ subtitle.value?.length || 0 }} / 30</mat-hint>
    </mat-form-field>

    <mat-form-field class="full-width">
      <mat-label>{{ 'rcc.release_notes' | translate }}</mat-label>
      <textarea matInput name="release_notes" #release_notes
                [(ngModel)]="metadata.release_notes"
                rows="2"
                maxlength="500"
                required></textarea>
      <mat-hint align="end">{{ release_notes.value?.length || 0 }} / 500</mat-hint>
    </mat-form-field>
    <mat-form-field class="full-width">
      <mat-label>{{ 'rcc.short_description' | translate }}</mat-label>
      <input matInput name="short_description" #short_description
             [(ngModel)]="metadata.short_description"
             maxlength="80"
             required>
      <mat-hint align="end">{{ short_description.value?.length || 0 }} / 80</mat-hint>
    </mat-form-field>
    <mat-form-field class="full-width">
      <mat-label>{{ 'rcc.description' | translate }}</mat-label>
      <textarea matInput name="description" #description matTextareaAutosize
                [(ngModel)]="metadata.description"
                rows="4"
                maxlength="5000"
                required></textarea>
      <mat-hint align="end">{{ description.value?.length || 0 }} / 5000</mat-hint>
    </mat-form-field>
    <mat-form-field class="full-width">
      <mat-label>{{ 'rcc.google_play_description_optional' | translate }}</mat-label>
      <textarea matInput name="description_android" #googlePlayDescription matTextareaAutosize
                [(ngModel)]="metadata.description_google_play"
                rows="4"
                maxlength="5000"></textarea>
      <mat-hint align="end">{{ googlePlayDescription.value?.length || 0 }} / 5000</mat-hint>
    </mat-form-field>
    <mat-form-field class="full-width">
      <mat-label>{{ 'rcc.keywords' | translate }}</mat-label>
      <input matInput name="keywords" matTextareaAutosize #keywords
             [placeholder]="'rcc.keywords' | translate"
             [(ngModel)]="metadata.keywords"
             maxlength="100"
             required>
      <mat-hint>{{ 'rcc.comma_separated_values' | translate }}</mat-hint>
      <mat-hint align="end">{{ keywords.value?.length || 0 }} / 100</mat-hint>
    </mat-form-field>
    <mat-form-field class="full-width">
      <mat-label>{{ 'rcc.support_url' | translate }}</mat-label>
      <input matInput name="support_url" type="url"
             [(ngModel)]="metadata.support_url"
             required>
    </mat-form-field>
    <mat-form-field class="full-width">
      <mat-label>{{ 'rcc.privacy_policy_url' | translate }}</mat-label>
      <input matInput name="privacy_policy_url" type="url"
             [(ngModel)]="metadata.privacy_policy_url"
             required>
    </mat-form-field>
    <mat-form-field class="full-width">
      <mat-label>{{ 'rcc.terms_of_service_url' | translate }}</mat-label>
      <input matInput name="terms_of_service_url" type="url"
             [(ngModel)]="metadata.terms_of_service_url"
             required>
    </mat-form-field>
    <rcc-api-request-status [status]="updateAppMetaDataStatus" class="form-row"></rcc-api-request-status>
    <div>
      <button mat-raised-button color="primary" [disabled]="!form.form.valid">
        {{ 'rcc.save' | translate }}
      </button>
    </div>
  </form>
</div>
